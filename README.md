# MiningMap
Данное приложение является тестовым заданием, которые я выполнял не так давно. Полный текст задания представлен ниже

## Задание
На языке программирования C# необходимо разработать приложение Windows Forms, которое на главной форме содержит карту из библиотеки GMap.NET, загружает из базы данных Microsoft SQL Server географические координаты условных единиц техники и отображает их на карте в виде маркеров.

**Ручное перемещение маркеров**

Также необходимо реализовать перемещение маркеров с помощью мыши (Drag&Drop, то есть нажать на маркер и перенести в другую точку карты) и сохранение новых координат в базу данных, чтобы после перезапуска приложения маркеры были расположены так же, как и до закрытия приложения.

**Автоматическое перемещение маркеров**

Реализовать парсинг сообщений с GPS приемника, которые отвечают за координаты (GPGGA сообщение). В приложение будут поступать данные в формате NMEA, обрабатываться и по этим данным будут меняться координаты одной единицы техники.
Для работы с приемником можно воспользоваться любым эмулятором из Интернета или парсить данные из файла.

**Скриптовые действия**

При заезде/перемещении маркера в определенную зону (нарисовать любую зону на карте) должно происходить какое-то действие. Данное действие должно выбираться в приложении из списка. Возможные действия:
1) Отображение диалогового окна с текстом (Диалоговое окно)
2) Изменение цвета маркера на случайный (Цвет маркера)
3) Создается новый маркер в случайной точке, но только в видимой области на данный момент

**Требования:**

1) Язык программирования: C#
2) Библиотека карты: GMap.NET
3) База данных: Microsoft SQL Server 2012
4) При работе с базой данных нельзя пользоваться никакими фреймворками (EntityFramework и т.д.), необходимо использовать T-SQL
5) Парсинг координат с GPS необходимо писать самостоятельно
6) Использование шаблонов проектирования

## Описание реализации
**Заполнение БД**

По пути Mining-Map/SQL files/ расположены 2 скрипта на T-SQL, один для создания БД, второй для создания и заполнения таблиц исходными тестовыми данными

**Основное приложение**

Приложение является типовым дестктопным приложением, в левой части которого располагается карта, на которой размещены маркеры, соответствующие той или иной позиции техники, а в правой части расположены элементы управления:
1) Контролы, отвечающие за перемещение углов особой зоны на карте
2) Переключатели, изменяющие поведение программы при заезде маркера в особую зону
Запущенное окно программы имеет вид:

![Скриншот](https://user-images.githubusercontent.com/35272981/230737860-7d1ff93b-8fb0-4f75-8593-149981f635cd.png)

**Эмуляция GPS-приёмника**

GPS-приёмник имитируется запуском консольного приложения ReceiverGPS. Данный эмулятор осуществляет изменение координат одной единицы техники с ID = 1. Для неё задаётся произвольный пункт назначения в небольшом радиусе от её текущего расположения, после чего она начинается перемещаться к указанной цели. Изменения положения отображаются в консоли. По достижению пункта назначения происходит назначение нового и цикл повторяется. 
При этом, при каждом изменении координат происходит соответствующая запись в файл GPS data.txt (при его отсутсвии он создаётся) в формате GPGGA.

**Настройка подключения к БД**

Подключение к БД осущетсвляется с помощью строки подключения (connectionString), которую можно задать в окне настроек (иконка шестерёнки в верхнем левом углу приложения)
